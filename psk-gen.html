<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8">
  <style>
    body {
      background-color:#241f2a;
    }

    div {
      padding-top: 40px;
      font-family: Garamond, Georgia, serif;
      font-size: large;
      background-color: #241f2a;
      color: azure;
    }

    button {
      width: 608px;
      height: 40px
    }

    input {
      width: 600px;
      height: 40px
    }
  </style>    
  <title>PSK Generator</title>
</head>
<body>
  <div>
      <button class="btn" type="button" id="triggerget">
        <label for="triggerget">Generate 64-character Key</label>
      </button>
      <input type="text" id="getkey" name="getkey" value="">    
  </div>
  <script>
/**
 * Create JavaScript variables that map to the exact DOM elements that are needed.
 * To know when the button is clicked, bind an event listener to it.
 * Each time the button is clicked, it generates a new key in the function below.
 * 
 * This key generation method was sourced from Google
 * https://cloud.google.com/network-connectivity/docs/vpn/how-to/generating-pre-shared-key
 * 
 * Get a set-length array of bytes (aka, octets).
 * Randomize the values, then Base64 encode the array and stringify the result.
 * Finally, update the input field in the DOM by changing its value to the newly generated key.
**/   
      const button = document.getElementById('triggerget')
      const input = document.getElementById('getkey')
     
      button.addEventListener('click', updateInput);

      function updateInput() {
        const a = new Uint8Array(48);
        window.crypto.getRandomValues(a);
        const key = (btoa(String.fromCharCode.apply(null, a)));
        input.value = key;
      }
  </script>
</body>
</html> 
